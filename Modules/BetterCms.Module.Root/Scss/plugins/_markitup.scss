$toolbar-height: 40px;
$editor-border: 1px solid #c6c6c6;
$editor-collapser-border: 1px solid $dark-main;

$toolbar-icons: (
                ('H1', $bcms-toolbar-h1),
                ('H2', $bcms-toolbar-h2),
                ('H3', $bcms-toolbar-h3),
                ('H4', $bcms-toolbar-h4),
                ('H5', $bcms-toolbar-h5),
                ('H6', $bcms-toolbar-h6),
                ('Bold', $bcms-editor-bold),
                ('Italic', $bcms-editor-italic),
                ('ListBullet', $bcms-editor-bullet-list),
                ('ListNumeric', $bcms-editor-number-list),
                ('Picture', $bcms-editor-cms-image),
                ('Link', $bcms-editor-link),
            // ('Quotes', $bcms-editor-blockquote),
                ('Code', $bcms-editor-source),
                ('Widget', $bcms-editor-cms-widget),
                ('WidgetOption', $bcms-editor-cms-widget),
                ('Option', $bcms-editor-cms-option)
);

%toolbar-extender {
    background: no-repeat center;
    display: block;
}

//module global styles
textarea {
    &.markItUpEditor {
        border: 0;
        box-sizing: border-box;
        display: block;
        font-family: $font-code-family;
        font-size: 14px;
        line-height: 18px;
        overflow: auto;
        padding: 10px;
        resize: none;
        width: 100%;

        &:focus {
            outline: none;
        }
    }
}

//module buttons override
.markItUpButton {
    &:hover {
        opacity: .8;
    }

    &WidgetOption {
        a {
            background-position: 5px center;
            padding-left: 25px !important;
            text-indent: 0 !important;
            width: auto;
        }
    }

    &.markItUpButtonBold,
    &.markItUpButtonItalic {
        padding-top: 3px;
        width: 30px !important;
    }
}

//module markdown editor
.markItUp {
    &Container {
        border: $editor-border;
    }

    &Header {
        @include clearfix();
        background-color: $white;
        border-bottom: $editor-border;
        min-height: $toolbar-height;
        position: relative;
        white-space: normal;

        > ul {
            > .markItUpButton {
                @include size($toolbar-height);
                float: left;
            }
        }

        ul {
            margin: 0;
            padding: 0;
        }

        li {
            @include transition(all 200ms);
            box-sizing: border-box;
            list-style: none;
            position: relative;

            &:hover {
                background-color: $border-thin-smoke;

                ul {
                    //fixme temp
                    display: block !important;
                }
            }
        }
    }

    &Button {
        a {
            font: {
                family: $font-base-family;
                size: 12px;
            }
            box-sizing: border-box;
            color: $text-dark;
            display: block;
            height: 100%;
            overflow: hidden;
            text-indent: -999em;

            &:hover {
                text-decoration: none;
            }
        }
    }

    &DropMenu {
        background: url($bcms-editor-drop-arrow) no-repeat right center;
        padding: 0 15px 0 6px;
        width: auto !important;

        > a {
            font-size: 14px;
            line-height: $toolbar-height;
            text-indent: 0;
        }

        > ul {
            @include position(absolute, 100% null null 0);
            background-color: $white;
            border: $editor-border;
            display: none;
            max-height: 170px;
            overflow-y: auto;
            padding: 0;
            width: 200px;
            z-index: 50;

            li {
                margin: 3px;
                padding: 0;
            }

            a {
                @include transition(all 200ms);
                padding: 3px 4px;
                text-indent: 0;
                white-space: nowrap;

                &:hover {
                    color: $text-blue;
                }
            }
        }
    }

    &Editor {
        min-height: 300px;
        resize: none;
    }

    &Footer {
        @include clearfix();
        background-color: $smoke;
        border-top: $editor-border;
        height: 28px;
        line-height: 28px;
        padding: 0 5px;
        position: relative;
    }

    &ResizeHandle {
        @include position(absolute, null 5px 5px null);
        @include size(0);
        border-color: transparent $bg-dark transparent transparent;
        border-style: dashed solid dashed dashed;
        border-width: 10px 10px 0 0;
        cursor: se-resize;
        float: right;
        overflow: hidden;
    }

    &Separator {
        display: none;
    }
}

@each $name, $icon in $toolbar-icons {
    .markItUpButton#{$name} {
        a {
            @extend %toolbar-extender;
            background-image: url($icon);
        }
    }
}
